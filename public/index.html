<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Complete Website Audit</title>
<style>
body { font-family: Arial, sans-serif; max-width: 900px; margin: auto; padding: 2rem; }
input, button { padding: 0.5rem; font-size: 1rem; margin-top: 1rem; width: 100%; }
#result { margin-top: 2rem; white-space: pre-wrap; }
</style>
</head>
<body>
<h1>Complete Website Audit (Multi-Page + PDF)</h1>
<p>Enter the root URL to audit the website:</p>
<input id="url" type="text" placeholder="https://example.com" />
<button onclick="runAudit()">Run Full Audit</button>
<div id="result"></div>
<div id="download" style="margin-top:1rem;"></div>

<script>
async function runAudit() {
  const url = document.getElementById("url").value;
  document.getElementById("result").innerText = "‚è≥ Running full multi-page audit...";
  document.getElementById("download").innerHTML = "";
  try {
    const res = await fetch("/audit", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ url })
    });
    const data = await res.json();
    if (data.error) {
      document.getElementById("result").innerText = "‚ùå Error: " + data.error;
    } else {
      document.getElementById("result").innerText = "‚úÖ GPT Summary:\n\n" + data.summary;
      document.getElementById("download").innerHTML = `<a href="${data.pdf}" target="_blank">üìÑ Download PDF Report</a>`;
    }
  } catch (err) {
    document.getElementById("result").innerText = "‚ùå Fetch failed: " + err;
  }
}
</script>
</body>
</html>
